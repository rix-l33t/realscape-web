<div *ngIf="item && control">
    <form [formGroup]="form_group">
        <div fxFlex fxLayoutAlign="center center" *ngIf="controls">
            <!-- <app-rn-query-view *ngIf="query"></app-rn-query-view> -->
            <div [fxLayout]="layout" [fxLayoutGap]="gap" [fxLayoutAlign]="align">
                <div mat-dialog-title>
                    {{control.name}}
                </div>
                <div mat-dialog-content fxFlex="0 1 80%">
                    <div *ngFor="let child of getControls(); let index = index">
                        <div [ngSwitch]="child!.type!.name!">
                            <div [fxFlex]="getControlAttribute('flex', '1 1 auto', child)"
                            [fxFlexOffset]="getControlAttribute('offset', '1%', child)"
                            [fxFlexAlign]="getControlAttribute('align', 'center', child)">
                                <div *ngSwitchCase="'AttrsCtrl'">
                                    <app-rn-attrs-ctrl  [item]="item" 
                                                        [control]="child" 
                                                        [formGroup]="form_group"
                                                        [fieldName]="getControlAttribute('field_name', undefined, child)"
                                                        (onEvent)="onEventHandler($event)">
                                    </app-rn-attrs-ctrl>
                                </div>
                                <div *ngSwitchCase="'SelectCtrl'">
                                    <app-rn-select-ctrl [item]="item" 
                                                        [control]="child" 
                                                        [formGroup]="form_group"
                                                        [fieldName]="getControlAttribute('field_name', undefined, child)" 
                                                        (onEvent)="onEventHandler($event)">
                                    </app-rn-select-ctrl>
                                </div>
                                <div *ngSwitchCase="'ItemSelectCtrl'">
                                    <app-rn-item-select-ctrl [item]="item" 
                                                             [control]="child" 
                                                             [formGroup]="form_group" 
                                                             [fieldName]="getControlAttribute('field_name', undefined, child)"
                                                             (onEvent)="onEventHandler($event)">
                                    </app-rn-item-select-ctrl>
                                </div>
                                <div *ngSwitchCase="'TypeSelectCtrl'">
                                    <app-rn-type-select-ctrl [item]="item" 
                                                             [control]="child" 
                                                             [formGroup]="form_group"
                                                             [fieldName]="getControlAttribute('field_name', undefined, child)" 
                                                             (onEvent)="onEventHandler($event)">
                                    </app-rn-type-select-ctrl>
                                </div>
                                <div *ngSwitchCase="'EditCtrl'">
                                    <app-rn-edit-ctrl   [item]="item" 
                                                        [control]="child" 
                                                        [formGroup]="form_group"
                                                        [fieldName]="getControlAttribute('field_name', undefined, child)" 
                                                        (onEvent)="onEventHandler($event)">
                                    </app-rn-edit-ctrl>
                                </div>
                                <div *ngSwitchCase="'LocationCtrl'">
                                    <app-rn-location-ctrl   [item]="item" 
                                                            [control]="child" 
                                                            [formGroup]="form_group" 
                                                            [fieldName]="getControlAttribute('field_name', undefined, child)"
                                                            (onEvent)="onEventHandler($event)">
                                    </app-rn-location-ctrl>
                                </div>
                                <div *ngSwitchCase="'TagsCtrl'">
                                    <app-rn-tags-ctrl   [item]="item" 
                                                        [control]="child"
                                                        [formGroup]="form_group" 
                                                        [fieldName]="getControlAttribute('field_name', undefined, child)"
                                                        (onEvent)="onEventHandler($event)">
                                    </app-rn-tags-ctrl>
                                </div>
                                <div *ngSwitchCase="'DateCtrl'">
                                    <app-rn-date-ctrl   [item]="item" 
                                                        [control]="child" 
                                                        [formGroup]="form_group"
                                                        [fieldName]="getControlAttribute('field_name', undefined, child)" 
                                                        (onEvent)="onEventHandler($event)">
                                    </app-rn-date-ctrl>
                                </div>
                                <div *ngSwitchCase="'LabelCtrl'">
                                    <app-rn-label-ctrl  [item]="item" 
                                                        [control]="child"
                                                        [formGroup]="form_group" 
                                                        [fieldName]="getControlAttribute('field_name', undefined, child)"
                                                        (onEvent)="onEventHandler($event)">
                                    </app-rn-label-ctrl>
                                </div>
                                <div *ngSwitchDefault>
                                    Control: {{child!.type!.name!}}
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div mat-dialog-actions fxFlex="0 1 80%">
                    <div *ngFor="let child of getButtons(); let index = index">
                        <button mat-button (click)="onButtonClick(child)" *ngIf="isNormalButton(child)">{{child.name}}</button>
                        <button mat-button (click)="onButtonClick(child)" *ngIf="isDefaultButton(child)" cdkFocusInitial>{{child.name}}</button>
                    </div>
                </div>
            </div>
        </div>
    </form>
</div>
