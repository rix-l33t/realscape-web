<!-- 
<div *ngIf="item && control && formGroup" fxFlexFill fxLayout="column">
    <div mat-dialot-title>{{control.name}}</div>
    
    <div fxFlexFill>
        <form [formGroup]="formGroup">
            <div *ngFor="let child of controls; let index = index" fxFlexFill>
                <div fxFlexFill fxLayout="column" fxLayoutAlign="center center">
                    <div  fxFlexFill>
                        <app-rn-ctrl [control]="child" [item]="item" [formGroup]="formGroup" [events]="events" [tabIndex]="tabIndex"></app-rn-ctrl>
                    </div>
                </div>
            </div>
        </form>
    </div>
    <div fxFlexFill>
        <div mat-dialog-actions fxFlex="0 1 80%">
            <div *ngFor="let child of buttons; let index = index">
                <button mat-button (click)="onButtonClick(child)" *ngIf="isNormalButton(child)">{{child.name}}</button>
                <button mat-button (click)="onButtonClick(child)" *ngIf="isDefaultButton(child)" cdkFocusInitial>{{child.name}}</button>
            </div>
        </div>
    </div>
</div>
-->
<div *ngIf="item && control && formGroup">
    <form [formGroup]="formGroup">
        <div fxFlex="1 1 100%" fxLayoutAlign="center center" *ngIf="controls">
            <div [fxLayout]="layout" [fxLayoutGap]="gap" [fxLayoutAlign]="align" fxFlex="1 1 100%">
                <div mat-dialog-title>
                    {{control.name}}
                </div>
                <div  fxFlexFill>
                    <div *ngFor="let child of controls; let index = index">
                        <div [ngSwitch]="getControlType(child.type!)" fxFlexFill>
                            <div *ngSwitchCase="'TypeSelectCtrl'"   [fxFlex]="getControlAttribute('flex', '1 1 auto', child)"
                                                                    [fxFlexOffset]="getControlAttribute('offset', '1%', child)"
                                                                    [fxFlexAlign]="getControlAttribute('align', 'center', child)">
                                <app-rn-type-select-ctrl [item]="item" 
                                                            [control]="child"
                                                            [events]="eventsSubject.asObservable()" 
                                                            [formGroup]="formGroup"
                                                            [fieldName]="getControlAttribute('field_name', '', child)" 
                                                            (onEvent)="onEventHandler($event)">
                                </app-rn-type-select-ctrl>
                            </div>
                            <div *ngSwitchCase="'AttrsCtrl'" 
                                    [fxFlex]="getControlAttribute('flex', '1 1 100%', child)"
                                    [fxFlexOffset]="getControlAttribute('offset', '1%', child)"
                                    [fxFlexAlign]="getControlAttribute('align', 'center', child)">
                                <app-rn-attrs-ctrl  [item]="item" 
                                                    [control]="child" 
                                                    [events]="eventsSubject.asObservable()"
                                                    [formGroup]="formGroup"
                                                    [fieldName]="getControlAttribute('field_name', '', child)"
                                                    (onEvent)="onEventHandler($event)">
                                </app-rn-attrs-ctrl>
                            </div>
                            <div *ngSwitchCase="'SelectCtrl'"   [fxFlex]="getControlAttribute('flex', '1 1 auto', child)"
                                                                [fxFlexOffset]="getControlAttribute('offset', '1%', child)"
                                                                [fxFlexAlign]="getControlAttribute('align', 'center', child)">
                                <app-rn-select-ctrl [item]="item" 
                                                    [control]="child" 
                                                    [events]="eventsSubject.asObservable()"
                                                    [formGroup]="formGroup"
                                                    [fieldName]="getControlAttribute('field_name', '', child)" 
                                                    (onEvent)="onEventHandler($event)">
                                </app-rn-select-ctrl>
                            </div>
                            <div *ngSwitchCase="'ItemSelectCtrl'"   [fxFlex]="getControlAttribute('flex', '1 1 auto', child)"
                                                                    [fxFlexOffset]="getControlAttribute('offset', '1%', child)"
                                                                    [fxFlexAlign]="getControlAttribute('align', 'center', child)">
                                <app-rn-item-select-ctrl [item]="item" 
                                                            [control]="child" 
                                                            [events]="eventsSubject.asObservable()"
                                                            [formGroup]="formGroup" 
                                                            [fieldName]="getControlAttribute('field_name', '', child)"
                                                            (onEvent)="onEventHandler($event)">
                                </app-rn-item-select-ctrl>
                            </div>
                            
                            <div *ngSwitchCase="'EditCtrl'" [fxFlex]="getControlAttribute('flex', '1 1 auto', child)"
                                                            [fxFlexOffset]="getControlAttribute('offset', '1%', child)"
                                                            [fxFlexAlign]="getControlAttribute('align', 'center', child)">
                                <app-rn-edit-ctrl   [item]="item" 
                                                    [control]="child" 
                                                    [events]="eventsSubject.asObservable()"
                                                    [formGroup]="formGroup"
                                                    [fieldName]="getControlAttribute('field_name', '', child)" 
                                                    (onEvent)="onEventHandler($event)">
                                </app-rn-edit-ctrl>
                            </div>
                            <div *ngSwitchCase="'LocationCtrl'" [fxFlex]="getControlAttribute('flex', '1 1 auto', child)"
                                                                [fxFlexOffset]="getControlAttribute('offset', '1%', child)"
                                                                [fxFlexAlign]="getControlAttribute('align', 'center', child)">
                                <app-rn-location-ctrl   [item]="item" 
                                                        [control]="child" 
                                                        [events]="eventsSubject.asObservable()"
                                                        [formGroup]="formGroup" 
                                                        [fieldName]="getControlAttribute('field_name', '', child)"
                                                        (onEvent)="onEventHandler($event)">
                                </app-rn-location-ctrl>
                            </div>
                            <div *ngSwitchCase="'TagsCtrl'" [fxFlex]="getControlAttribute('flex', '1 1 auto', child)"
                                                            [fxFlexOffset]="getControlAttribute('offset', '1%', child)"
                                                            [fxFlexAlign]="getControlAttribute('align', 'center', child)">
                                <app-rn-tags-ctrl   [item]="item" 
                                                    [control]="child"
                                                    [events]="eventsSubject.asObservable()"
                                                    [formGroup]="formGroup" 
                                                    [fieldName]="getControlAttribute('field_name', '', child)"
                                                    (onEvent)="onEventHandler($event)">
                                </app-rn-tags-ctrl>
                            </div>
                            <div *ngSwitchCase="'DateCtrl'" [fxFlex]="getControlAttribute('flex', '1 1 auto', child)"
                                                            [fxFlexOffset]="getControlAttribute('offset', '1%', child)"
                                                            [fxFlexAlign]="getControlAttribute('align', 'center', child)">
                                <app-rn-date-ctrl   [item]="item" 
                                                    [control]="child" 
                                                    [events]="eventsSubject.asObservable()"
                                                    [formGroup]="formGroup"
                                                    [fieldName]="getControlAttribute('field_name', '', child)" 
                                                    (onEvent)="onEventHandler($event)">
                                </app-rn-date-ctrl>
                            </div>
                            <div *ngSwitchCase="'LabelCtrl'" [fxFlex]="getControlAttribute('flex', '1 1 auto', child)"
                                                            [fxFlexOffset]="getControlAttribute('offset', '1%', child)"
                                                            [fxFlexAlign]="getControlAttribute('align', 'center', child)">
                                <app-rn-label-ctrl  [item]="item" 
                                                    [control]="child"
                                                    [events]="eventsSubject.asObservable()"
                                                    [formGroup]="formGroup" 
                                                    [fieldName]="getControlAttribute('field_name', '', child)"
                                                    (onEvent)="onEventHandler($event)">
                                </app-rn-label-ctrl>
                            </div>
                            <div *ngSwitchCase="'TabsCtrl'" [fxFlex]="getControlAttribute('flex', '1 1 100%', child)"
                                                            [fxFlexOffset]="getControlAttribute('offset', '1%', child)"
                                                            [fxFlexAlign]="getControlAttribute('align', 'center', child)">
                                <app-rn-tabs-ctrl   [item]="item" 
                                                    [control]="child"
                                                    [events]="eventsSubject.asObservable()"
                                                    [formGroup]="formGroup" 
                                                    [fieldName]="getControlAttribute('field_name', '', child)"
                                                    (onEvent)="onEventHandler($event)">
                                </app-rn-tabs-ctrl>
                            </div>
                            <div *ngSwitchDefault>
                                Control: {{child!.type!.name!}} {{getControlType(control)}}
                            </div>
                        </div>
                    </div>
                </div>
                
                <div mat-dialog-actions fxFlex="0 1 80%">
                    <div *ngFor="let child of buttons; let index = index">
                        <button mat-button (click)="onButtonClick(child)" *ngIf="isNormalButton(child)">{{child.name}}</button>
                        <button mat-button (click)="onButtonClick(child)" *ngIf="isDefaultButton(child)" cdkFocusInitial>{{child.name}}</button>
                    </div>
                </div>
            </div>
        </div>
    </form>
    <ng-container *ngIf="views.length === 1">
        <app-rn-view [items]="controls" [view]="views[0]" [item]="item" (onEvent)="onEventHandler($event)"></app-rn-view>
    </ng-container>
</div>

<!--
<div *ngIf="item && control">
    <form [formGroup]="form_group">
        <div fxFlex="1 1 100%" fxLayoutAlign="center center" *ngIf="controls">
            <div [fxLayout]="layout" [fxLayoutGap]="gap" [fxLayoutAlign]="align" fxFlex="1 1 100%">
                <div mat-dialog-title>
                    {{control.name}}
                </div>
                <div  fxFlexFill>
                    <div *ngFor="let child of controls; let index = index">
                        <div [ngSwitch]="getControlType(child.type!)" fxFlexFill>
                            <div *ngSwitchCase="'TypeSelectCtrl'"   [fxFlex]="getControlAttribute('flex', '1 1 auto', child)"
                                                                    [fxFlexOffset]="getControlAttribute('offset', '1%', child)"
                                                                    [fxFlexAlign]="getControlAttribute('align', 'center', child)">
                                <app-rn-type-select-ctrl [item]="item" 
                                                            [control]="child" 
                                                            [formGroup]="form_group"
                                                            [fieldName]="getControlAttribute('field_name', '', child)" 
                                                            (onEvent)="onEventHandler($event)">
                                </app-rn-type-select-ctrl>
                            </div>
                            <div *ngSwitchCase="'AttrsCtrl'" 
                                    [fxFlex]="getControlAttribute('flex', '1 1 100%', child)"
                                    [fxFlexOffset]="getControlAttribute('offset', '1%', child)"
                                    [fxFlexAlign]="getControlAttribute('align', 'center', child)">
                                <app-rn-attrs-ctrl  [item]="item" 
                                                    [control]="child" 
                                                    [formGroup]="form_group"
                                                    [fieldName]="getControlAttribute('field_name', '', child)"
                                                    (onEvent)="onEventHandler($event)">
                                </app-rn-attrs-ctrl>
                            </div>
                            <div *ngSwitchCase="'SelectCtrl'"   [fxFlex]="getControlAttribute('flex', '1 1 auto', child)"
                                                                [fxFlexOffset]="getControlAttribute('offset', '1%', child)"
                                                                [fxFlexAlign]="getControlAttribute('align', 'center', child)">
                                <app-rn-select-ctrl [item]="item" 
                                                    [control]="child" 
                                                    [formGroup]="form_group"
                                                    [fieldName]="getControlAttribute('field_name', '', child)" 
                                                    (onEvent)="onEventHandler($event)">
                                </app-rn-select-ctrl>
                            </div>
                            <div *ngSwitchCase="'ItemSelectCtrl'"   [fxFlex]="getControlAttribute('flex', '1 1 auto', child)"
                                                                    [fxFlexOffset]="getControlAttribute('offset', '1%', child)"
                                                                    [fxFlexAlign]="getControlAttribute('align', 'center', child)">
                                <app-rn-item-select-ctrl [item]="item" 
                                                            [control]="child" 
                                                            [formGroup]="form_group" 
                                                            [fieldName]="getControlAttribute('field_name', '', child)"
                                                            (onEvent)="onEventHandler($event)">
                                </app-rn-item-select-ctrl>
                            </div>
                            
                            <div *ngSwitchCase="'EditCtrl'" [fxFlex]="getControlAttribute('flex', '1 1 auto', child)"
                                                            [fxFlexOffset]="getControlAttribute('offset', '1%', child)"
                                                            [fxFlexAlign]="getControlAttribute('align', 'center', child)">
                                <app-rn-edit-ctrl   [item]="item" 
                                                    [control]="child" 
                                                    [formGroup]="form_group"
                                                    [fieldName]="getControlAttribute('field_name', '', child)" 
                                                    (onEvent)="onEventHandler($event)">
                                </app-rn-edit-ctrl>
                            </div>
                            <div *ngSwitchCase="'LocationCtrl'" [fxFlex]="getControlAttribute('flex', '1 1 auto', child)"
                                                                [fxFlexOffset]="getControlAttribute('offset', '1%', child)"
                                                                [fxFlexAlign]="getControlAttribute('align', 'center', child)">
                                <app-rn-location-ctrl   [item]="item" 
                                                        [control]="child" 
                                                        [formGroup]="form_group" 
                                                        [fieldName]="getControlAttribute('field_name', '', child)"
                                                        (onEvent)="onEventHandler($event)">
                                </app-rn-location-ctrl>
                            </div>
                            <div *ngSwitchCase="'TagsCtrl'" [fxFlex]="getControlAttribute('flex', '1 1 auto', child)"
                                                            [fxFlexOffset]="getControlAttribute('offset', '1%', child)"
                                                            [fxFlexAlign]="getControlAttribute('align', 'center', child)">
                                <app-rn-tags-ctrl   [item]="item" 
                                                    [control]="child"
                                                    [formGroup]="form_group" 
                                                    [fieldName]="getControlAttribute('field_name', '', child)"
                                                    (onEvent)="onEventHandler($event)">
                                </app-rn-tags-ctrl>
                            </div>
                            <div *ngSwitchCase="'DateCtrl'" [fxFlex]="getControlAttribute('flex', '1 1 auto', child)"
                                                            [fxFlexOffset]="getControlAttribute('offset', '1%', child)"
                                                            [fxFlexAlign]="getControlAttribute('align', 'center', child)">
                                <app-rn-date-ctrl   [item]="item" 
                                                    [control]="child" 
                                                    [formGroup]="form_group"
                                                    [fieldName]="getControlAttribute('field_name', '', child)" 
                                                    (onEvent)="onEventHandler($event)">
                                </app-rn-date-ctrl>
                            </div>
                            <div *ngSwitchCase="'LabelCtrl'" [fxFlex]="getControlAttribute('flex', '1 1 auto', child)"
                                                            [fxFlexOffset]="getControlAttribute('offset', '1%', child)"
                                                            [fxFlexAlign]="getControlAttribute('align', 'center', child)">
                                <app-rn-label-ctrl  [item]="item" 
                                                    [control]="child"
                                                    [formGroup]="form_group" 
                                                    [fieldName]="getControlAttribute('field_name', '', child)"
                                                    (onEvent)="onEventHandler($event)">
                                </app-rn-label-ctrl>
                            </div>
                            <div *ngSwitchCase="'TabsCtrl'" [fxFlex]="getControlAttribute('flex', '1 1 100%', child)"
                                                            [fxFlexOffset]="getControlAttribute('offset', '1%', child)"
                                                            [fxFlexAlign]="getControlAttribute('align', 'center', child)">
                                <app-rn-tabs-ctrl   [item]="item" 
                                                    [control]="child"
                                                    [formGroup]="form_group" 
                                                    [fieldName]="getControlAttribute('field_name', '', child)"
                                                    (onEvent)="onEventHandler($event)">
                                </app-rn-tabs-ctrl>
                            </div>
                            <div *ngSwitchDefault>
                                Control: {{child!.type!.name!}} {{getControlType(control)}}
                            </div>
                        </div>
                    </div>
                </div>
                
                <div mat-dialog-actions fxFlex="0 1 80%">
                    <div *ngFor="let child of buttons; let index = index">
                        <button mat-button (click)="onButtonClick(child)" *ngIf="isNormalButton(child)">{{child.name}}</button>
                        <button mat-button (click)="onButtonClick(child)" *ngIf="isDefaultButton(child)" cdkFocusInitial>{{child.name}}</button>
                    </div>
                </div>
            </div>
        </div>
    </form>
    <ng-container *ngIf="views.length === 1">
        <app-rn-view [items]="controls" [view]="views[0]" [item]="item" (onEvent)="onEventHandler($event)"></app-rn-view>
    </ng-container>
</div>
-->
